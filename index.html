 <!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gestione Contatti â€“ Dark Gold</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0a0a0a;
  --card:#121212;
  --gold:#d8a23a;
  --gold-soft:rgba(216,162,58,.25);
  --text:#f5f5f5;
  --muted:#9aa0a6;
  --border:rgba(255,255,255,.12);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  padding:20px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

h1{ margin:0 0 10px; }

.card{
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}

label{ font-size:12px; color:var(--muted); }

input, textarea, select{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:rgba(0,0,0,.35);
  color:var(--text);
}

textarea{ resize:vertical; }

button{
  cursor:pointer;
  border-radius:12px;
  padding:10px 14px;
  font-weight:900;
  border:1px solid var(--gold);
  background:linear-gradient(180deg,#f5d27a,#d8a23a);
  color:#000;
}

button.ghost{
  background:transparent;
  color:var(--gold);
}

button:hover{ filter:brightness(1.1); }

#btnAdd.pulse{
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%{ box-shadow:0 0 0 0 var(--gold-soft); }
  70%{ box-shadow:0 0 0 14px transparent; }
  100%{ box-shadow:0 0 0 0 transparent; }
}

table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  border-bottom:1px solid var(--border);
}
tr:hover{ background:rgba(255,255,255,.04); cursor:pointer; }

.pill{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  font-size:12px;
  color:var(--muted);
}

/* MODAL */
#modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#modal .box{
  width:min(600px,95vw);
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
}
</style>
</head>

<body>

<h1>ðŸ“‡ Gestione Contatti</h1>

<div class="card">
  <label>ID (automatico)</label>
  <input id="c_id" placeholder="Automatico" disabled>

  <label>Nome</label>
  <input id="c_nome" placeholder="Mario Rossi">

  <label>Telefono</label>
  <input id="c_tel" placeholder="+39...">

  <label>Indirizzo</label>
  <input id="c_addr" placeholder="Via Roma 1">

  <button id="btnAdd">âž• Aggiungi contatto</button>
</div>

<div class="card">
  <h3>Contatti</h3>
  <table>
    <thead>
      <tr><th>ID</th><th>Nome</th><th>Telefono</th></tr>
    </thead>
    <tbody id="contactTable"></tbody>
  </table>
</div>

<!-- MODAL -->
<div id="modal">
  <div class="box">
    <h3>ðŸ“ž Come contattarlo</h3>
    <div id="modalBody"></div>
    <br>
    <button class="ghost" onclick="closeModal()">âœ• Chiudi</button>
  </div>
</div>

<script>
const contacts = {};
let selectedId = null;

/* ID automatico */
function nextId(){
  let n = Object.keys(contacts).length + 1;
  return "C" + String(n).padStart(3,"0");
}

/* Render tabella */
function render(){
  const tb = document.getElementById("contactTable");
  tb.innerHTML = "";
  Object.values(contacts).forEach(c=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${c.id}</td><td>${c.nome}</td><td>${c.tel}</td>`;
    tr.onclick = ()=>selectContact(c.id);
    tb.appendChild(tr);
  });
}

/* Aggiungi */
document.getElementById("btnAdd").onclick = ()=>{
  const id = nextId();
  const nome = c_nome.value.trim() || "â€”";
  const tel  = c_tel.value.trim() || "";
  const addr = c_addr.value.trim() || "";
  contacts[id] = {id,nome,tel,addr,log:[]};
  c_nome.value = c_tel.value = c_addr.value = "";
  render();
};

/* Animazione bottone */
["c_nome","c_tel","c_addr"].forEach(id=>{
  document.getElementById(id).addEventListener("input",()=>{
    btnAdd.classList.toggle("pulse", c_nome.value||c_tel.value||c_addr.value);
  });
});

/* Seleziona contatto */
function selectContact(id){
  const c = contacts[id];
  selectedId = id;
  openModal(c);
}

/* Modal */
function openModal(c){
  const telClean = c.tel.replace(/\D/g,"");
  modalBody.innerHTML = `
    <p><b>ID:</b> ${c.id}</p>
    <p><b>Nome:</b> ${c.nome}</p>
    <p><b>Telefono:</b> ${c.tel || "â€”"}</p>
    <p><b>Indirizzo:</b> ${c.addr || "â€”"}</p>
    <br>
    <a href="tel:${telClean}" class="pill">ðŸ“ž Chiama</a>
    <a href="https://wa.me/${telClean}" target="_blank" class="pill">ðŸŸ¢ WhatsApp</a>
  `;
  modal.style.display="flex";
}
function closeModal(){ modal.style.display="none"; }
</script>

</body>
</html>

