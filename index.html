<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Agente Operativo â€“ Archivio Contatti</title>

<style>
:root{
  --bg:#0a0a0a;
  --text:#f3f4f6;
  --muted:#a0adb8;
  --border:rgba(255,255,255,.12);
  --gold:#d8a23a;
  --ok:#25d366;
  --bad:#ff4d4d;
}
*{box-sizing:border-box}
body{
  margin:24px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
input,select,button{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:rgba(0,0,0,.3);
  color:var(--text);
}
button{
  font-weight:900;
  background:linear-gradient(135deg,#ffd166,#d8a23a);
  color:#000;
  cursor:pointer;
}
button:hover{filter:brightness(1.05)}
table{width:100%;border-collapse:collapse}
th,td{border-bottom:1px solid var(--border);padding:8px}
tr:hover{background:rgba(255,255,255,.05);cursor:pointer}
.pill{border:1px solid var(--border);border-radius:999px;padding:3px 10px;font-size:12px}
.ok{color:var(--ok);font-weight:800}
.bad{color:var(--bad);font-weight:900}
#btn_add.pulse{animation:pulse 1.2s infinite}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(216,162,58,.4)}
  70%{box-shadow:0 0 0 14px transparent}
  100%{box-shadow:0 0 0 0 transparent}
}
#modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center}
#modal .box{background:#111;border:1px solid var(--border);border-radius:14px;padding:16px;width:min(600px,95vw)}
</style>
</head>

<body>

<h1>ðŸ“‡ Archivio Contatti (dati = ORO)</h1>

<div class="card">
  <input id="c_id" placeholder="ID automatico">
  <input id="c_nome" placeholder="Nome">
  <input id="c_tel" placeholder="Telefono">
  <input id="c_addr" placeholder="Indirizzo">
  <button id="btn_add">Aggiungi contatto</button>
  <div id="msg"></div>
</div>

<div class="card">
  <h3>Contatti</h3>
  <table>
    <thead><tr><th>ID</th><th>Nome</th><th>Telefono</th></tr></thead>
    <tbody id="table"></tbody>
  </table>
</div>

<div id="modal">
  <div class="box">
    <h3>ðŸ“ž Come contattarlo</h3>
    <div id="modalBody"></div>
    <br>
    <button onclick="closeModal()">Chiudi</button>
  </div>
</div>

<script>
const KEY="ARCHIVIO_CONTATTI_ORO";
const data=JSON.parse(localStorage.getItem(KEY)||"{}");
function save(){localStorage.setItem(KEY,JSON.stringify(data))}

function nextId(){
  const n=Object.keys(data).length+1;
  return "C"+String(n).padStart(3,"0");
}

btn_add.onclick=()=>{
  const id=c_id.value.trim()||nextId();
  data[id]={id,nome:c_nome.value||"â€”",tel:c_tel.value||"",addr:c_addr.value||""};
  c_id.value=id;c_nome.value=c_tel.value=c_addr.value="";
  save();render();
  msg.innerHTML=`<div class="ok">Salvato ${id}</div>`;
};

["c_nome","c_tel","c_addr"].forEach(id=>{
  document.getElementById(id).oninput=()=>{
    btn_add.classList.toggle("pulse",c_nome.value||c_tel.value||c_addr.value);
  }
});

function render(){
  table.innerHTML="";
  Object.values(data).forEach(c=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${c.id}</td><td>${c.nome}</td><td>${c.tel}</td>`;
    tr.onclick=()=>openModal(c);
    table.appendChild(tr);
  });
}
function openModal(c){
  modalBody.innerHTML=`
    <div><b>Nome:</b> ${c.nome}</div>
    <div><b>Telefono:</b> ${c.tel||"â€”"}</div>
    <div><b>Indirizzo:</b> ${c.addr||"â€”"}</div>
    <br>
    <a href="tel:${c.tel}">ðŸ“ž Chiama</a> |
    <a target="_blank" href="https://wa.me/${c.tel.replace(/\D/g,"")}">ðŸŸ¢ WhatsApp</a>
  `;
  modal.style.display="flex";
}
function closeModal(){modal.style.display="none"}
render();
</script>
</body>
</html>
